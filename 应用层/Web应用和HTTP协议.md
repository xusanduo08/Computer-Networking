### Web应用和HTTP协议

​	Web的应用层协议是__超文本传输协议__（HTTP）。

​	HTTP协议由两部分程序实现：一个客户机程序和一个服务器程序，两者运行在不同的端系统中，通过交换HTTP报文进行会话。

​	HTTP定义了这些报文的格式以及客户机和服务器是如何进行报文交换的。

​	HTTP使用TCP作为它的支撑运输层协议。

​	HTTP客户机发起一个与服务器的TCP连接，一旦连接建立，浏览器和服务器进程就可以通过套接字接口访问TCP。

​	TCP为HTTP提供可靠数据传输服务。

​	HTTP服务器并不保存关于客户机的任何信息，所以说HTTP是一个__无状态协议__。

​	Web使用了客户机/服务器应用程序体系结构。Web服务器总是打开的，具有一个固定的IP地址，服务于数以百万计的不同浏览器。



__非持久连接__：每个请求/响应对是经过一个单独的TCP连接发送。

__持久连接__：所有请求及相应的响应经相同的TCP连接发送。

__往返时间__（Round-Trip Time，RTT）：一个小分组从客户机到服务器再回到客户机所花费的时间，其中包括分组传播时延、分组在中间路由器和交换机上的排队时延以及分组处理时延。

浏览器在浏览器和Web服务器之间发起一个TCP连接，“三次握手”过程：

1、客户机向服务器发送一个小TCP报文段

2、服务器用一个小TCP报文段做出确认和响应

3、最后，客户机向服务器返回确认。

三次握手的前两部分耗费的时间为一个RTT。完成了三次握手的前两个部分后，客户机将三次握手的第三个部分（确认）与一个HTTP请求报文结合起来发送到该TCP连接。一旦该请求报文到达服务器，服务器向该TCP连接发送HTML文件。该HTTP请求/响应又耗掉一个RTT。因此，总的响应时间就是两个RTT加上服务器传输HTML文件的时间。

非持久连接缺点：

​	1、必须为每个请求的对象建立和维护一个全新的连接，对于每个连接，客户机和服务器都要分配TCP的缓冲区和变量，增加服务器负担；

​	2、每个对象的传输时延为两个RTT，一个RTT用于建立TCP，另一个RTT用于请求和接收一个对象

持久连接情况下，服务器在发送响应后保持该TCP连接打开。在相同的客户机与服务器之间的后续请求和响应报文可通过相同的连接进行传送。所以不存在由于维护多个TCP连接给服务器造成的严重的负担，也不存在建立多个TCP连接时产生的时延。



cookie技术由4个组成部分：

​	1、在HTTP响应报文中有一个cookie首部行；

​	2、在HTTP请求报文中有一个cookie首部行；

​	3、在用户端系统中保留有一个cookie文件，由用户的浏览器管理；

​	4、在Web站点有一个后端数据库

cookie可以用于标识用户。用户首次访问站点时，可能需要提供一个用户标识。在后继访问中，浏览器向服务器传递一个cookie首部，供服务器识别该用户。因此，cookie可以在无状态的HTTP上建立一个用户会话层。比如，当用户登上基于Web的电子邮件系统时，浏览器想服务器发送cookie信息，允许该服务器通过用户与应用程序之间的会话对用户进行验证。